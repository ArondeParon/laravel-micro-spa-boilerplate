(self.webpackChunk=self.webpackChunk||[]).push([[469],{9222:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>o});var t=n(7757),i=n.n(t);function asyncGeneratorStep(e,r,n,t,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?r(c):Promise.resolve(c).then(t,i)}function _defineProperties(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var o=function(){function WorkerService(Events){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,WorkerService),this.$events=Events}var e,r,n,t,o;return e=WorkerService,(r=[{key:"install",value:(t=i().mark((function _callee(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSupported){e.next=6;break}return e.next=3,navigator.serviceWorker.register("/worker.js",{scope:"."}).then((function(){return navigator.serviceWorker.ready})).then(this.onInstalled.bind(this),this.onFailed.bind(this));case 3:return e.abrupt("return",e.sent);case 6:console.warn("ServiceWorker UnAvailable");case 7:return e.abrupt("return",Promise.reject(new Error("ServiceWorker UnAvailable")));case 8:case"end":return e.stop()}}),_callee,this)})),o=function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function _next(e){asyncGeneratorStep(o,n,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(o,n,i,_next,_throw,"throw",e)}_next(void 0)}))},function(){return o.apply(this,arguments)})},{key:"onInstalled",value:function(e){this.$events.$emit("worker:registered",e)}},{key:"onFailed",value:function(e){this.$events.$emit("worker:failed",e)}},{key:"dispatch",value:function(e){var r=this;return new Promise((function(n,t){r.isSupported&&r.isAvailable||t();var i=new MessageChannel;i.port1.onmessage=function(e){e.data.error?t(e.data.error):n(e.data)},navigator.serviceWorker.controller.postMessage(e,[i.port2])}))}},{key:"isSupported",get:function(){return"navigator"in window&&"serviceWorker"in navigator}},{key:"isAvailable",get:function(){return navigator.serviceWorker.controller}}])&&_defineProperties(e.prototype,r),n&&_defineProperties(e,n),WorkerService}()}}]);