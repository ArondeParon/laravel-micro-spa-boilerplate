(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{T7hF:function(e,r,n){"use strict";n.r(r),n.d(r,"default",(function(){return i}));var t=n("o0o1"),o=n.n(t);function asyncGeneratorStep(e,r,n,t,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?r(c):Promise.resolve(c).then(t,o)}function _defineProperties(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var i=function(){function WorkerService(Events){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,WorkerService),this.$events=Events}var e,r,n,t,i;return e=WorkerService,(r=[{key:"install",value:(t=o.a.mark((function _callee(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSupported){e.next=6;break}return e.next=3,navigator.serviceWorker.register("/worker.js",{scope:"."}).then((function(){return navigator.serviceWorker.ready})).then(this.onInstalled.bind(this),this.onFailed.bind(this));case 3:return e.abrupt("return",e.sent);case 6:console.warn("ServiceWorker UnAvailable");case 7:return e.abrupt("return",Promise.reject(new Error("ServiceWorker UnAvailable")));case 8:case"end":return e.stop()}}),_callee,this)})),i=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function _next(e){asyncGeneratorStep(i,n,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,o,_next,_throw,"throw",e)}_next(void 0)}))},function(){return i.apply(this,arguments)})},{key:"onInstalled",value:function(e){this.$events.$emit("worker:registered",e)}},{key:"onFailed",value:function(e){this.$events.$emit("worker:failed",e)}},{key:"dispatch",value:function(e){var r=this;return new Promise((function(n,t){r.isSupported&&r.isAvailable||t();var o=new MessageChannel;o.port1.onmessage=function(e){e.data.error?t(e.data.error):n(e.data)},navigator.serviceWorker.controller.postMessage(e,[o.port2])}))}},{key:"isSupported",get:function(){return"navigator"in window&&"serviceWorker"in navigator}},{key:"isAvailable",get:function(){return navigator.serviceWorker.controller}}])&&_defineProperties(e.prototype,r),n&&_defineProperties(e,n),WorkerService}()}}]);